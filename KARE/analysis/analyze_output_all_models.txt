================================================================================
RETRIEVE FILE COVERAGE ANALYSIS
================================================================================

Target Model: rag_mor_Qwen_Qwen2.5_7B_Instruct_int__projects_slmreasoning_junh_Debate_KARE_verl_models_prediction_brier_7b_step150_MedCPT_8_8

Debate logs path: /data/wang/junh/githubs/Debate/KARE/results/rag/rag_mor_Qwen_Qwen2.5_7B_Instruct_int__projects_slmreasoning_junh_Debate_KARE_verl_models_prediction_brier_7b_step150_MedCPT_8_8/debate_logs

Total retrieve files found: 4782

RETRIEVE FILES PER ROLE:
--------------------------------------------------------------------------------
  Target Patient Analyst        :  966 files,  966 successfully parsed
  Mortality Risk Assessor       :  964 files,  964 successfully parsed
  Protective Factor Analyst     :  964 files,  964 successfully parsed
  Integrator Mortality          :  953 files,  953 successfully parsed
  Integrator Survival           :  935 files,  935 successfully parsed

================================================================================
LOADING PATIENT GROUPS
================================================================================

Checking retry patients across 4 models...
  rag_mor_Qwen_Qwen2.5_7B_Instruct_int__projects_slmreasoning_junh_Debate_KARE_verl_models_format_enforcer_7b_step57_MedCPT_8_8: 86 patients with retries
  fallback_rag_mor_Qwen_Qwen2.5_7B_Instruct_8_8: 4 patients with retries
  rag_mor_Qwen_Qwen2.5_7B_Instruct_int__projects_slmreasoning_junh_Debate_KARE_verl_models_prediction_brier_7b_step150_MedCPT_8_8: 21 patients with retries
  rag_mor_Qwen_Qwen2.5_7B_Instruct_int__projects_slmreasoning_junh_Debate_KARE_verl_models_both_format_enforcer_7b_step57_MedCPT_8_8: 36 patients with retries

Total unique patients with retries across all models: 143

Total patients in dataset: 996
Wrong predictions in target model: 54
Retry patients across ALL models: 143

================================================================================
COVERAGE ANALYSIS
================================================================================

Unique patients with retrieve files (any role): 966
Expected total patients: 996
Missing: 30

ALWAYS-WRONG PATIENTS:
  Total always-wrong: 54
  With retrieve files: 53
  Missing retrieve files: 1

  Missing patient IDs (first 10):
    77614_0

RETRY PATIENTS:
  Total retry patients: 143
  With retrieve files: 136
  Missing retrieve files: 7

  Missing patient IDs (first 10):
    76327_7
    77614_0
    78342_1
    78565_1
    79294_0
    808_3
    84465_1

================================================================================
PER-ROLE STATISTICS
================================================================================

Target Patient Analyst:
  Total patients with data: 966
  Always-wrong patients: 53 / 54
  Retry patients: 136 / 143

  Document Length Statistics (tokens):
    All patients - Mean: 889.80, Median: 826.75, Std: 417.44
    Always-wrong - Mean: 824.20, Median: 815.75, Std: 193.10
    Retry        - Mean: 884.04, Median: 829.12, Std: 257.76

Mortality Risk Assessor:
  Total patients with data: 964
  Always-wrong patients: 53 / 54
  Retry patients: 136 / 143

  Document Length Statistics (tokens):
    All patients - Mean: 908.80, Median: 844.12, Std: 342.47
    Always-wrong - Mean: 890.49, Median: 860.00, Std: 196.68
    Retry        - Mean: 909.85, Median: 858.12, Std: 287.10

Protective Factor Analyst:
  Total patients with data: 964
  Always-wrong patients: 53 / 54
  Retry patients: 136 / 143

  Document Length Statistics (tokens):
    All patients - Mean: 929.41, Median: 853.12, Std: 434.64
    Always-wrong - Mean: 891.12, Median: 871.75, Std: 204.65
    Retry        - Mean: 934.85, Median: 864.38, Std: 289.87

Integrator Mortality:
  Total patients with data: 953
  Always-wrong patients: 52 / 54
  Retry patients: 136 / 143

  Document Length Statistics (tokens):
    All patients - Mean: 1260.40, Median: 1215.25, Std: 310.77
    Always-wrong - Mean: 1225.53, Median: 1153.62, Std: 306.94
    Retry        - Mean: 1237.54, Median: 1209.50, Std: 310.65

Integrator Survival:
  Total patients with data: 935
  Always-wrong patients: 53 / 54
  Retry patients: 129 / 143

  Document Length Statistics (tokens):
    All patients - Mean: 1144.89, Median: 1139.00, Std: 278.66
    Always-wrong - Mean: 1099.78, Median: 1081.75, Std: 237.99
    Retry        - Mean: 1118.39, Median: 1099.50, Std: 252.13

================================================================================
SUMMARY TABLE
================================================================================

Patient counts per role:
                     Role  Total  Always-Wrong  Retry
   Target Patient Analyst    966            53    136
  Mortality Risk Assessor    964            53    136
Protective Factor Analyst    964            53    136
     Integrator Mortality    953            52    136
      Integrator Survival    935            53    129


Mean document lengths (tokens) per role:
                     Role    Mean_All  Mean_AlwaysWrong  Mean_Retry
   Target Patient Analyst  889.802795        824.202830  884.044118
  Mortality Risk Assessor  908.796162        890.490566  909.854779
Protective Factor Analyst  929.410529        891.117925  934.847426
     Integrator Mortality 1260.397692       1225.528846 1237.540441
      Integrator Survival 1144.888503       1099.783019 1118.385659

================================================================================
ANALYSIS COMPLETE
================================================================================
